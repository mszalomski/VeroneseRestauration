<!DOCTYPE html>
<html lang="de">
<head>
	<title>Veronese Restauration</title>
	<meta charset="utf8">
	<link rel="stylesheet" href="scripts/jQRangeSlider-5.7.2/css/iThing.css" type="text/css">
	<link rel="stylesheet" href="styles/bootstrap.min.css" type="text/css">
	<link rel="stylesheet" href="styles/layout.css" type="text/css">
	<script src="scripts/jQuery/jquery-3.2.1.min.js"></script>
	<script src="scripts/jquery-ui-1.12.1/jquery-ui.min.js"></script>
	<script src="scripts/jQRangeSlider-5.7.2/jQDateRangeSlider-min.js"></script>
	<script src="scripts/bootstrap-3.3.7/js/bootstrap.min.js"></script>
	<script src="scripts/veronese_main.js"></script>
	<script type="data/data.json" src="data.json"></script>
</head>
<body onLoad="redrawCarousel()">
<div id="maindiv">
	<div id="box_carousel">
		<div id="Slide01" class="carousel carousel_hidden">
			<div class="carousel_title_hidden"><p>something to read</p></div>
			<div class="carousel_content_hidden">
				<div class="info_content">
					<p>Mir gehen gerade die Texte aus....</p>
					<p>Irgendwelche Informationen über irgendwas</p>
				</div>
				<div class="picture_slider">
				</div>
			</div>
		</div>
		<div id="Slide02" class="carousel carousel_minimized">
			<div class="carousel_title_min"><p>ein anderer Titel</p></div>
			<div class="carousel_content_hidden">
				<div class="info_content">
					<p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam duo . kasd , no sanctus ipsum amet. Lorem , consetetur , nonumy eirmod tempor invidunt ut dolore aliquyam eratsed voluptuaAt eos accusam justo dolores ea . clita  gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>
					<p>Sed ut perspiciatis unde omnis iste natus error  explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos </p>
				</div>
				<div class="picture_slider">
				</div>
			</div>
		</div>
		<div id="Slide03" class="carousel carousel_visible">
			<div class="carousel_title_active"><p>Ich bin ein Titel</p></div>
			<div class="carousel_content_active">
				<div class="info_content">
					<p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>
					<p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos </p>
				</div>
				<div class="picture_slider">
					
				</div>
			</div>
		</div>
		<div id="Slide04" class="carousel carousel_minimized">
			<div class="carousel_title_min"><p>Ich bin Slide Nummer 4</p></div>
			<div class="carousel_content_hidden">
				<div class="info_content">
					<p>Hier gibt es nichts besonderes zu sehen, einfach nur Text ohne jegliche Bedeutung. Bitte weitergehen. Sie verschwenden hier ihre Zeit, die sie an anderer Stelle wesentlich sinnvoller nutzen könnten. Warum sind sie denn immer noch hier? Interessiert sie dieses dumme geschwafel hier wirklich? Nagut, wenn sie es denn unbedingt so wollen: LOREM IPSUM!</p>
				</div>
				<div class="picture_slider">
				</div>
			</div>
		</div>
		<div id="Slide05" class="carousel carousel_hidden">
			<div class="carousel_title_hidden"><p>Letzer Slide</p></div>
			<div class="carousel_content_hidden">
				<div class="info_content">
					<p>Ja wirklich, das ist der letzte Slide, danach kommt nichts mehr, alles ist rum und zu Ende. Sie können endlich nach Hause gehen und die bläkenden Kinder versorgen</p>
					<p>Sed ut perspiciatis unde omnis iste natus error  explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos </p>
				</div>
				<div class="picture_slider">
				</div>
			</div>
		</div>
	</div>
	<div id="box_slider">
		<div id="slider"></div>
		<div id="querschliff_time"></div>
		<div id="firnissabnahme_time"></div>
		<div id="infrarot_time"></div>
		<div id="roentgen_time"></div>
		<div id="retusche_time"></div>
	</div>
	<script>
	// JSON DATA
	$.getJSON("data.json", function(json) {
		
		$("#querschliff_time").dateRangeSlider({
			enabled: false,
			arrows: false,
			bounds:{
				min: new Date(2016, 0, 1),
				max: new Date(2017, 11, 31)
			},
			defaultValues:{
				min: new Date(json[0].start_time.split("-")[0], parseInt(json[0].start_time.split("-")[1]) - 1, json[0].start_time.split("-")[2]),
				max: new Date(json[0].end_time.split("-")[0], parseInt(json[0].end_time.split("-")[1]) - 1, json[0].end_time.split("-")[2])
			}
		});
		$("#firnissabnahme_time").dateRangeSlider({
			enabled: false,
			arrows: false,
			bounds:{
				min: new Date(2016, 0, 1),
				max: new Date(2017, 11, 31)
			},
			defaultValues:{
				min: new Date(json[1].start_time.split("-")[0], parseInt(json[1].start_time.split("-")[1]) - 1, json[1].start_time.split("-")[2]),
				max: new Date(json[1].end_time.split("-")[0], parseInt(json[1].end_time.split("-")[1]) - 1, json[1].end_time.split("-")[2])
			}
		});
		$("#infrarot_time").dateRangeSlider({
			enabled: false,
			arrows: false,
			bounds:{
				min: new Date(2016, 0, 1),
				max: new Date(2017, 11, 31)
			},
			defaultValues:{
				min: new Date(json[2].start_time.split("-")[0], parseInt(json[2].start_time.split("-")[1]) - 1, json[2].start_time.split("-")[2]),
				max: new Date(json[2].end_time.split("-")[0], parseInt(json[2].end_time.split("-")[1]) - 1, json[2].end_time.split("-")[2])
			}
		});
		$("#roentgen_time").dateRangeSlider({
			enabled: false,
			arrows: false,
			bounds:{
				min: new Date(2016, 0, 1),
				max: new Date(2017, 11, 31)
			},
			defaultValues:{
				min: new Date(json[3].start_time.split("-")[0], parseInt(json[3].start_time.split("-")[1]) - 1, json[3].start_time.split("-")[2]),
				max: new Date(json[3].end_time.split("-")[0], parseInt(json[3].end_time.split("-")[1]) - 1, json[3].end_time.split("-")[2])
			}
		});
		$("#retusche_time").dateRangeSlider({
			enabled: false,
			arrows: false,
			bounds:{
				min: new Date(2016, 0, 1),
				max: new Date(2017, 11, 31)
			},
			defaultValues:{
				min: new Date(json[4].start_time.split("-")[0], parseInt(json[4].start_time.split("-")[1]) - 1, json[4].start_time.split("-")[2]),
				max: new Date(json[4].end_time.split("-")[0], parseInt(json[4].end_time.split("-")[1]) - 1, json[4].end_time.split("-")[2])
			}
		});
		
		
		// SLIDER
		$("#slider").dateRangeSlider(
		{
			arrows: false,
			bounds:{
				min: new Date(2016, 0, 1),
				max: new Date(2017, 11, 31)
			},
			defaultValues:{
				min: new Date(2016, 0, 1),
				max: new Date(2016, 1, 8)
			},
			formatter:function(val){
				var days = val.getDate(),
				  month = val.getMonth() + 1,
				  year = val.getFullYear();
				return days + "." + month + "." + year;
			},
			range:{
				min: {days: 7}
			}
		});
		

		$("#slider").bind("valuesChanging", function(e, data){
			var activeValues = [];
			json.forEach(
				function(value, i, array){
				
					
					var dFrom = value.start_time.split("-");
					var dTo = value.end_time.split("-");
					
					var dateFrom = new Date(dFrom[0], parseInt(dFrom[1])-1, dFrom[2]);
					var dateTo = new Date(dTo[0], parseInt(dTo[1])-1, dTo[2]);
					
					var checkMin = data.values.min;
					var checkMax = data.values.max;
					
					
					// Check if date is in the time period
					if(checkMax >= dateFrom && checkMax <= dateTo || checkMin >= dateFrom && checkMin <= dateTo){
						if(activeValues.indexOf(value) === -1){
							activeValues.push(value);
						}				
					} else {
						if(activeValues.indexOf(value) !== -1){
							activeValues.splice(activeValues.indexOf(value), 1);
						}
					}
				}
			);
			console.log(activeValues);
		});
		// END SLIDER
		
	// END JSON DATA
	});

    </script>
</div>
</body>
</html>
